<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
        Key Technical Levels
    </title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,300italic,400italic,500italic,700,700italic" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="../../widgets/ktl/css/ktl.min.css">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js">
    </script>
    <![endif]-->
</head>
<body class="cbp-spmenu-push">
    <!-- The wrapper -->
    <div class="fxs_wrapper fxs_content_wide">
        <!--FXS CONTENT CLASS STARTS-->
        <div class="fxs_content">
            <!--FXS CONTENT ID STARTS-->
            <div id="fxs_content">
                <!-- FXS CONTENTVIEW STARTS /Space for Global Alerts & Notifications -->
                <div class="fxs_contentView">
                    <!--FXS MAIN DETAIL STARTS-->
                    <main id="fxs_it_detail" role="main">
                        <!--FXS HOME STARTS-->
                        <div fxs_section="" id="fxs_home" class="fxs_detail">
                            <!--ROW STARTS-->
                            <div class="fxs_row">
                                <!--COL 100 STARTS-->
                                <div class="fxs_col fxs_col_100">
                                    <!--WIDGET KTL-->

                                    <form>
                                        <label>
                                            Basis row height:
                                            <select id="height">
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                            </select>
                                        </label>
                                    </form>
                                    <div id="ktlfilter"></div>
                                    <div id="ktl"></div>
                                    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
                                            integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
                                            crossorigin="anonymous"></script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
                                    <script>
                                        var data, htm, templatedata, templatefilter, period, foo;
                                        period = ('ktlperiod' in localStorage) ? parseInt(localStorage.getItem('ktlperiod')) : 1;
                                        data = {
                                            'Height': 1,
                                            'Weekly': {
                                                'Rows': [
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1675' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1665' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1655' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1645' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1635' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1625' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1615' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1605' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1595' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1585' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1575' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1565' },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ) },
                                                            { 'fill_width': Math.round((Math.random() * 100) ), 'fill_color': Math.round((Math.random() * 4)+1 ), 'price': '1.1555' }
                                                ]
                                            },
                                            'Monthly': {
                                                'Rows': [
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1675' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1665' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1655' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1645' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1635' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1625' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1615' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1605' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1595' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1585' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1575' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1565' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1555' }
                                                ]
                                            },
                                            'Annually': {
                                                'Rows': [
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1675' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1665' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1655' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1645' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1635' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1625' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1615' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1605' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1595' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1585' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1575' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1565' },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1) },
                                                            { 'fill_width': Math.round((Math.random() * 100)), 'fill_color': Math.round((Math.random() * 4) + 1), 'price': '1.1555' }
                                                ]
                                            },
                                        };

                                        $('#height').on('change', function () {
                                            data.Height = parseInt($('#height option:selected').val());
                                            init();
                                        });

                                        $('#ktl').bind('mousewheel DOMMouseScroll', function (e) {
                                            var delta = (e.originalEvent.wheelDelta || -e.originalEvent.detail);
                                            period = parseInt(period);
                                            if (delta < 0 && period > 1) {
                                                period--;
                                            } else if (delta > 0 && period < 3) {
                                                period++;
                                            }
                                            localStorage.setItem('ktlperiod', period);
                                            init();
                                        });

                                        $(document).on('click', '#fxs_tabs_nav li:first-child', function () {
                                            period = 1;
                                            localStorage.setItem('ktlperiod', period);
                                            init();
                                        });
                                        $(document).on('click', '#fxs_tabs_nav li:nth-child(2)', function () {
                                            period = 2;
                                            localStorage.setItem('ktlperiod', period);
                                            init();
                                        });

                                        $(document).on('click', '#fxs_tabs_nav li:last-child', function () {
                                            period = 3;
                                            localStorage.setItem('ktlperiod', period);
                                            init();
                                        });

                                        function init() {
                                            $.get('../../widgets/ktl/mustache/ktl.html', function (templates) {
                                                template = $(templates).filter('#fxs_ktl').html();
                                                $('#ktl').html(Mustache.render(template, foo));
                                            });
                                            switch (period) {
                                                case 2:
                                                    foo = { Data: data.Monthly, Height: data.Height, Period2: true };
                                                    break;
                                                case 3:
                                                    foo = { Data: data.Annually, Height: data.Height, Period3: true };
                                                    break;
                                                default:
                                                    foo = { Data: data.Weekly, Height: data.Height, Period1: true };
                                            }
                                        }
                                        init();
                                    </script>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
