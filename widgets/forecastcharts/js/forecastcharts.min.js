(function(){FXStreetWidgets.Widget.Base=function(n){var t={};return t.Container=FXStreetWidgets.Widget.Base.prototype.Container,t.loaderBase=n,t.data=FXStreetWidgets.Widget.Base.prototype.data,t.interval=FXStreetWidgets.Widget.Base.prototype.interval,t.init=FXStreetWidgets.Widget.Base.prototype.init,t.setSettingsByObject=FXStreetWidgets.Widget.Base.prototype.setSettingsByObject,t.addEvents=FXStreetWidgets.Widget.Base.prototype.addEvents,t.setVars=FXStreetWidgets.Widget.Base.prototype.setVars,t.loadData=FXStreetWidgets.Widget.Base.prototype.loadData,t.loadDataFromUrl=FXStreetWidgets.Widget.Base.prototype.loadDataFromUrl,t.setDatesToJson=FXStreetWidgets.Widget.Base.prototype.setDatesToJson,t.renderHtml=FXStreetWidgets.Widget.Base.prototype.renderHtml,t.log=FXStreetWidgets.Widget.Base.prototype.log,t.jsonDataIsValid=FXStreetWidgets.Widget.Base.prototype.jsonDataIsValid,t.handleJsonInvalidData=FXStreetWidgets.Widget.Base.prototype.handleJsonInvalidData,t};FXStreetWidgets.Widget.Base.prototype.Container=null;FXStreetWidgets.Widget.Base.prototype.loaderBase=null;FXStreetWidgets.Widget.Base.prototype.data=null;FXStreetWidgets.Widget.Base.prototype.interval=null;FXStreetWidgets.Widget.Base.prototype.init=function(n){this.setSettingsByObject(n)};FXStreetWidgets.Widget.Base.prototype.setSettingsByObject=function(n){for(var t in n)n.hasOwnProperty(t)&&this[t]!==undefined&&(this[t]=n[t])};FXStreetWidgets.Widget.Base.prototype.addEvents=function(){};FXStreetWidgets.Widget.Base.prototype.setVars=function(){};FXStreetWidgets.Widget.Base.prototype.loadData=function(n){this.loadDataFromUrl(this.loaderBase.config.EndPoint,n)};FXStreetWidgets.Widget.Base.prototype.loadDataFromUrl=function(n,t){var i=this;FXStreetWidgets.Util.ajaxJsonGetter(n,t).done(function(n){if(!i.jsonDataIsValid(n)){i.handleJsonInvalidData();return}i.data=n;i.loaderBase.isReady()?(i.log("start renderHtml for: "+i.loaderBase.config.WidgetName),i.renderHtml()):i.interval=setInterval(function(){i.loaderBase.isReady()&&(clearInterval(i.interval),i.log("start renderHtml for: "+i.loaderBase.config.WidgetName),i.renderHtml())},i.intervalTimeToWaitForReady)})};FXStreetWidgets.Widget.Base.prototype.setDatesToJson=function(n,t){var i=FXStreetWidgets.Util.formatDate(t);return n.LastUpdatedDate=t,n.LastUpdatedHour=i,n};FXStreetWidgets.Widget.Base.prototype.renderHtml=function(){};FXStreetWidgets.Widget.Base.prototype.log=function(n){FXStreetWidgets.Util.log(n)};FXStreetWidgets.Widget.Base.prototype.jsonDataIsValid=function(n){return FXStreetWidgets.Util.isValid(n)&&FXStreetWidgets.Util.arrayIsValid(n.Values)&&FXStreetWidgets.Util.isValid(n.Values[0])};FXStreetWidgets.Widget.Base.prototype.handleJsonInvalidData=function(){var t=this,n=t.loaderBase.config.Translations.NoDataAvailable;FXStreetWidgets.Util.isValid(n)||(n="No data available");t.Container.html(n)}})(),function(n){FXStreetWidgets.Widget.LoaderBase=function(t){var i={};return i.options=t,i.config=FXStreetWidgets.Widget.LoaderBase.prototype.config,i.isReady=FXStreetWidgets.Widget.LoaderBase.prototype.isReady,i.isReadyCustomCheck=FXStreetWidgets.Widget.LoaderBase.prototype.isReadyCustomCheck,i.initConfiguration=FXStreetWidgets.Widget.LoaderBase.prototype.initConfiguration,i.getContainer=FXStreetWidgets.Widget.LoaderBase.prototype.getContainer,i.getHost=FXStreetWidgets.Widget.LoaderBase.prototype.getHost,i.getVersion=FXStreetWidgets.Widget.LoaderBase.prototype.getVersion,i.getCustomJs=FXStreetWidgets.Widget.LoaderBase.prototype.getCustomJs,i.getSharedJs=FXStreetWidgets.Widget.LoaderBase.prototype.getSharedJs,i.getEndPoint=FXStreetWidgets.Widget.LoaderBase.prototype.getEndPoint,i.getEndPointTranslation=FXStreetWidgets.Widget.LoaderBase.prototype.getEndPointTranslation,i.initWidgets=FXStreetWidgets.Widget.LoaderBase.prototype.initWidgets,i.log=FXStreetWidgets.Widget.LoaderBase.prototype.log,i.chartLibrariesAreLoaded=FXStreetWidgets.Widget.LoaderBase.prototype.chartLibrariesAreLoaded,i.getDefaultHost=FXStreetWidgets.Widget.LoaderBase.prototype.getDefaultHost,i.mustachesCount=0,i.mustachesLoadedCount=0,i.customJsCount=0,i.customJsLoadedCount=0,i.sharedJsCount=0,i.sharedJsLoadedCount=0,i.translationsLoaded=!1,i.haveCustomJs=!1,i.haveSharedJs=!1,i.init=function(){if(!FXStreetWidgets.Util.isValid(i.options)||!FXStreetWidgets.Util.isValid(i.options.WidgetName)||!i.options.WidgetName.trim()){i.log("unable to load fxswidget options bad configure.");return}FXStreetWidgets.Initialization.registerLoader(i.options.WidgetName,i);i.initConfiguration();i.loadUtils();var t=n("div[fxs_widget][fxs_name='"+i.options.WidgetName+"']");FXStreetWidgets.Util.async(function(){i.initWidgets(t)})},i.loadDeferred=function(n){i.log("loading deferred "+i.options.WidgetName);var t=n.find("div[fxs_widget][fxs_name='"+i.options.WidgetName+"']");i.initWidgets(t)},i.loadUtils=function(){FXStreetWidgets.Util.ajaxJsonGetter(i.config.EndPointTranslation).done(function(n){i.translationsLoaded=!0;i.config.Translations=n.Values});n.each(i.config.CustomJs,function(n,t){i.customJsCount++;var u="",r="",f;typeof t=="string"?(r=t,u=FXStreetWidgets.Configuration.getCoreJsUrl(r)):t&&typeof t=="object"&&(r=t.Js,u=FXStreetWidgets.Configuration.getCoreJsUrl(r),f=t.CustomLoadedDelegate);FXStreetWidgets.ResourceManagerObj.load(r,FXStreetWidgets.ResourceType.Js,u,function(){i.customJsLoadedCount++},f)});n.each(i.config.SharedJs,function(n,t){i.sharedJsCount++;var r=FXStreetWidgets.Configuration.createResourceUrl(t.Container,t.Js);FXStreetWidgets.ResourceManagerObj.load(t.Js,FXStreetWidgets.ResourceType.Js,r,function(){i.sharedJsLoadedCount++},t.CustomLoadedDelegate)});n.each(i.config.Mustaches,function(n){i.mustachesCount++;var t=n+".html",r=FXStreetWidgets.Configuration.getMustacheUrl(t,i.options.WidgetName);FXStreetWidgets.ResourceManagerObj.load(t,FXStreetWidgets.ResourceType.Mustache,r,function(t){i.config.Mustaches[n]=t.Value;i.mustachesLoadedCount++})})},i.async_loadjs=function(n,t){var r=document.getElementsByTagName("script")[0],i=document.createElement("script");i.type="text/javascript";i.async=!0;i.src=n;t&&typeof t=="function"&&(i.addEventListener?i.addEventListener("load",t,!1):i.onreadystatechange=function(){(this.readyState==="complete"||this.readyState==="loaded")&&t.call()});r.parentNode.insertBefore(i,r)},i};FXStreetWidgets.Widget.LoaderBase.prototype.config={};FXStreetWidgets.Widget.LoaderBase.prototype.initWidgets=function(){};FXStreetWidgets.Widget.LoaderBase.prototype.initConfiguration=function(){this.log("init configuration for: "+this.options.WidgetName);var n=this.getContainer(),t=this.getHost(n),i=this.getVersion(n),r=this.getCustomJs(),u=this.getSharedJs();this.config={WidgetType:this.options.WidgetType,WidgetName:this.options.WidgetName,Culture:FXStreetWidgets.Configuration.getCulture(),EndPoint:this.getEndPoint(t,i),EndPointTranslation:this.getEndPointTranslation(t,i),DefaultHost:this.getDefaultHost(this.options),CustomJs:r,SharedJs:u,Mustaches:this.options.Mustaches,Translations:{}}};FXStreetWidgets.Widget.LoaderBase.prototype.getDefaultHost=function(n){var t=FXStreetWidgets.Configuration.getHosts(),i,r;return t?(i=t[n.WidgetType],r=i||n.DefaultHost,r):n.DefaultHost};FXStreetWidgets.Widget.LoaderBase.prototype.getContainer=function(){return n("div[fxs_widget][fxs_name='"+this.options.WidgetName+"']").first()};FXStreetWidgets.Widget.LoaderBase.prototype.getHost=function(n){n=n||this.getContainer();var t=n.attr("fxs_host");return FXStreetWidgets.Util.isUndefined(t)?this.getDefaultHost(this.options):t};FXStreetWidgets.Widget.LoaderBase.prototype.getVersion=function(n){n=n||this.getContainer();var t=n.attr("fxs_version")||this.options.DefaultVersion;return FXStreetWidgets.Util.isUndefined(t)?"":t};FXStreetWidgets.Widget.LoaderBase.prototype.getCustomJs=function(){var n=[];return FXStreetWidgets.Util.arrayIsValid(this.options.CustomJs)&&(this.haveCustomJs=!0,n=this.options.CustomJs),n};FXStreetWidgets.Widget.LoaderBase.prototype.getSharedJs=function(){var n=[];return FXStreetWidgets.Util.arrayIsValid(this.options.SharedJs)&&(this.haveSharedJs=!0,n=this.options.SharedJs),n};var t=function(n,t){return n.replace(/{version}/g,t).replace(/{culture}/g,FXStreetWidgets.Configuration.getCulture())};FXStreetWidgets.Widget.LoaderBase.prototype.getEndPoint=function(n,i){var r,u;return this.options.EndPointV2?(u=t(this.options.EndPointV2,i),r=n+u):r=n+(i?i+"/":"")+FXStreetWidgets.Configuration.getCulture()+"/"+this.options.EndPoint,r};FXStreetWidgets.Widget.LoaderBase.prototype.getEndPointTranslation=function(n,i){var r,u;return this.options.EndPointTranslationV2?(u=t(this.options.EndPointTranslationV2,i),r=n+u):r=n+(i?i+"/":"")+FXStreetWidgets.Configuration.getCulture()+"/"+this.options.EndPointTranslation,r};FXStreetWidgets.Widget.LoaderBase.prototype.isReady=function(){var n=this.translationsLoaded===!0&&(this.haveCustomJs===!1||this.haveCustomJs===!0&&this.customJsLoadedCount>=this.customJsCount)&&(this.haveSharedJs===!1||this.haveSharedJs===!0&&this.sharedJsLoadedCount>=this.sharedJsCount)&&this.mustachesLoadedCount===this.mustachesCount;return n=n&&this.isReadyCustomCheck(),n===!0&&this.log("loader ready for: "+this.options.WidgetName),n};FXStreetWidgets.Widget.LoaderBase.prototype.isReadyCustomCheck=function(){return!0};FXStreetWidgets.Widget.LoaderBase.prototype.chartLibrariesAreLoaded=function(){return typeof d3!="undefined"&&typeof c3!="undefined"};FXStreetWidgets.Widget.LoaderBase.prototype.log=function(n){FXStreetWidgets.Util.log(n)}}(FXStreetWidgets.$),function(n){FXStreetWidgets.ForecastChartC3JsonBuilder=function(){var t={},s=!1,h=function(n){var t=d3.time.format("%B %d, %Y");return t(n)},u=null,f=null,e=null,c=2,l=function(n){var t=d3.time.format("%B %d, %Y");return t(n)},a=function(){return 1},v=function(n){var t=".{0}f".replace("{0}",c),i=d3.format(t);return i(n)},y=[],o=0,i={hasArea:!1,zerobased:!1},p=!0,w=!1,b=!0,k=!0,r={hasOrder:!1,value:!1},d=[],g=[],nt=50,tt=50;return t.withShowPoint=function(n){return s=n,t},t.withTooltipDelegate=function(n){return h=n,t},t.withRadiusDelegate=function(n){return a=n,t},t.withAxisTooltipDelegate=function(n){return l=n,t},t.withTooltipValueDelegate=function(n){return u=n,t},t.withTooltipContentsDelegate=function(n){return e=n,t},t.withTooltipNameDelegate=function(n){return f=n,t},t.addDataColumnConfig=function(n){return y.push(n),t},t.withBar=function(n){return o=n,t},t.withAxis=function(n){return g.push(n),t},t.withArea=function(n){return i.hasArea=!0,i.zerobased=n,t},t.withGroup=function(){var n=Array.from(arguments);return d.push(n),t},t.withOrder=function(n){return r.hasOrder=!0,r.value=n,t},t.withXSort=function(n){return p=n,t},t.withShowY=function(n){return w=n,t},t.withShowY2=function(n){return b=n,t},t.withTooltipGrouped=function(n){return k=n,t},t.withRightPadding=function(n){return nt=n,t},t.withLeftPadding=function(n){return tt=n,t},t.build=function(t,it,rt){if(!t||!it)return console.error("FXStreetWidgets: Invalid data. Couldn't build forecastcharts."),{};typeof rt!="undefined"&&rt!==null&&(c=rt);var ut={bindto:it,data:{xs:{},xFormat:"%m/%d/%Y",xSort:p,columns:t,axes:{},names:{},colors:{},types:{},classes:{},groups:[]},grid:{x:{show:!0},y:{show:!0}},axis:{x:{type:"timeseries",tick:{format:"%b %Y",culling:{max:12}},padding:{right:nt*1e7,left:tt*1e7}},y:{show:w,tick:{format:v}},y2:{show:b,tick:{format:v}},tooltip:{format:{title:l}}},point:{show:s,r:a},tooltip:{format:{title:h},grouped:k},legend:{hide:[]}};return n.each(y,function(n,t){t&&(t.axes&&(ut.data.axes[t.name]=t.axes),ut.data.xs[t.name]=t.xs?t.xs:"x",t.names&&(ut.data.names[t.name]=t.names),t.colors&&(ut.data.colors[t.name]=t.colors),t.types&&(ut.data.types[t.name]=t.types),t.classes&&(ut.data.classes[t.name]=t.classes),t.hideLegend&&ut.legend.hide.push(t.name))}),n.each(d,function(n,t){ut.data.groups.push(t)}),r.hasOrder&&(ut.data.order=r.value),o>0&&(ut.bar={width:{ratio:o}}),n.each(g,function(n,t){ut.axis[t.name]=t.value}),i.hasArea&&(ut.area={zerobased:i.zerobased}),u&&(ut.tooltip.format.value=u),f&&(ut.tooltip.format.name=f),e&&(ut.tooltip.contents=e),ut},t}}(FXStreetWidgets.$),function(n){FXStreetWidgets.Widget.ForecastChart={};FXStreetWidgets.Widget.ForecastChart.Base=function(){var t={};t.Data=null;t.WidgetId="";t.Translations=null;t.JsonC3={};t.init=function(n){t.setSettingsByObject(n);t.initJsonC3()};t.initJsonC3=function(){n.each(t.ForecastPeriodType,function(n,i){var r=i.Statics,u=t.getTimeseriesConfigs(r),f=t.getMultipleTimeseries(u),e=t.getColumnsConfigsByPeriodType(r),o=t.getColumns(e),s=f.concat(o),h=t.buildJson(s,n);t.JsonC3[r]=h})};t.getTimeseriesConfigs=function(){return[{AxisName:"x",Values:t.Data.Values}]};t.getColumnsConfigsByPeriodType=function(){return[]};t.buildJson=function(){};t.render=function(){u(t.JsonC3)};t.setSettingsByObject=function(n){for(var t in n)n.hasOwnProperty(t)&&this[t]!==undefined&&(this[t]=n[t])};t.ForecastPeriodType={week:{Statics:"WeekStatics",Value:"WeekValue",Type:"WeekType",Order:0},month:{Statics:"MonthStatics",Value:"MonthValue",Type:"MonthType",Order:1},quarter:{Statics:"QuarterStatics",Value:"QuarterValue",Type:"QuarterType",Order:2}};t.getColumns=function(n){var t=[];return n.forEach(function(n){var r=i(n);t.push(r)}),t};t.getOffsetByForecastPeriodType=function(n){return n===t.ForecastPeriodType.week.Statics?1:n===t.ForecastPeriodType.month.Statics?4:n===t.ForecastPeriodType.quarter.Statics?12:0};t.getValuesWithTimeOffset=function(t,i,r,u){return t.map(function(t){date=moment(t.Date).add(i,"weeks").toDate();var r=n.extend(!0,{},t);return r.Date=date.toISOString(),r}).filter(function(n){return r?moment(n.Date).isSameOrAfter(u,"day"):moment(u).isSameOrAfter(n.Date,"day")})};t.getMultipleTimeseries=function(n){var t=[];return n.forEach(function(n){var i=r(n.AxisName,n.Values);t.push(i)}),t};t.getAssetDecimalPlaces=function(){if(t.Data.Values.length===0)return 2;var n=t.Data.Values[0];return n.Asset.DecimalPlaces};var i=function(n){var f=n.Values?n.Values:t.Data.Values,r=[],i;for(r.push(n.RowTitle),i=0;i<f.length;i++){var e=f[i],u=n.ForecastType?e[n.ForecastType][n.PropertyName]:e[n.PropertyName],o=u||u===0?u:null;r.push(o)}return r},r=function(t,i){var r=[],u="MM/DD/YYYY";return r.push(t),n.each(i,function(n,t){r.push(moment(t.Date).format(u))}),r},u=function(t){n.each(t,function(n,t){c3.generate(t)})};return t}}(FXStreetWidgets.$),function(n){FXStreetWidgets.Widget.ForecastChart.Overview=function(){var r=FXStreetWidgets.Widget.ForecastChart.Base(),t=FXStreetWidgets.Util.extendObject(r),i;t.ForecastData=null;t.TooltipTemplate="";i=null;t.init=function(n){t.setSettingsByObject(n);r.init(n)};r.initJsonC3=function(){f();var n=e(),i=o(n);t.JsonC3.WeekStatics=i};var f=function(){i=c()},e=function(){var r=[],u=[],f=v(i),s=t.Data.Values[0].Date,e=t.Data.Values[t.Data.Values.length-1].Date,o;u.push({RowTitle:"ClosePrice_Row",PropertyName:"ClosePrice"});n.each(t.ForecastPeriodType,function(n,i){var o=t.getOffsetByForecastPeriodType(i.Statics),h=t.getValuesWithTimeOffset(t.Data.Values,o,!0,moment(e).add(12,"weeks").format()),c,l,a;r.push({AxisName:n+"_x",Values:h});c=f[i.Order].filter(function(n,t){return t>0});l=c.map(function(){return{Date:moment(s).add(o,"weeks").format()}});r.push({AxisName:n+"_scatter_x",Values:l});a={Values:h,RowTitle:n+"_Average_Row",PropertyName:"PriceAverage",ForecastType:i.Statics};u.push(a)});o=t.getValuesWithTimeOffset(t.Data.Values,0,!0,moment(e).add(12,"weeks").format());r.push({AxisName:"x",Values:o});var h=t.getMultipleTimeseries(r),c=t.getColumns(u,!1);return h.concat(c).concat(f)},o=function(n){var r="#fxs_forecast_charts_overview_"+t.WidgetId,i="fxs_overview",u=t.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({name:"week_Average_Row",axes:"y2",xs:"week_x",names:"1 Week",colors:"#04aab2",classes:i+"_week"}).addDataColumnConfig({name:"month_Average_Row",axes:"y2",xs:"month_x",names:"1 Month",colors:"#304c70",classes:i+"_month"}).addDataColumnConfig({name:"quarter_Average_Row",axes:"y2",xs:"quarter_x",names:"3 Months",colors:"#e4871b",classes:i+"_quarter"}).addDataColumnConfig({name:"week_Scatter_Row",axes:"y2",xs:"week_scatter_x",names:"Last Week Forecast",colors:"#04aab2",classes:i+"_week_scatter",types:"scatter",hideLegend:!0}).addDataColumnConfig({name:"month_Scatter_Row",axes:"y2",xs:"month_scatter_x",names:"Last Month Forecast",colors:"#304c70",classes:i+"_week_scatter",types:"scatter",hideLegend:!0}).addDataColumnConfig({name:"quarter_Scatter_Row",axes:"y2",xs:"quarter_scatter_x",names:"Last Quarter Forecast",colors:"#e4871b",classes:i+"_week_scatter",types:"scatter",hideLegend:!0}).addDataColumnConfig({name:"ClosePrice_Row",axes:"y2",names:t.Translations.ClosePrice,colors:"#1b1c23",classes:i+"_closeprice"}).withRadiusDelegate(s).withTooltipContentsDelegate(h).withTooltipGrouped(!1).withRightPadding(100).withXSort(!1).build(n,r,u)},s=function(n){if(n.id.indexOf("Scatter")===-1)return 1;var t=u(i,n.id),r=t[n.index+1];return r.TotalEntries*3},h=function(n,r,f,e){var h=t.getAssetDecimalPlaces(),c=",.{0}f".replace("{0}",h),o;for(f=d3.format(c),o=0;o<n.length;o++){if(n[o].id.indexOf("Scatter")===-1)return this.getTooltipContent(n,r,f,e);var l=u(i,n[o].id),s=l[n[o].index+1],a=s.SentimentType,v=s.TotalEntries,y=s.TooltipValue||n[o].value,p={Translations:t.Translations,Value:f(y),Sentiment:a,TotalAnalysts:v};return FXStreetWidgets.Util.renderByHtmlTemplate(t.TooltipTemplate,p)}return null},u=function(n,t){for(var r,u,i=0;i<n.length;i++)if(r=n[i],u=r[0],typeof u=="string"&&u===t)return r;return null},c=function(){var i=[];return n.each(t.ForecastPeriodType,function(r,u){var f=[],o=a(u),e;f.push(r+"_Scatter_Row");n.each(t.ForecastData.Entries,function(n,t){if(t[u.Value]){var i={SentimentType:t[u.Type],Value:t[u.Value]};f.push(i)}});e=l(f,o);i.push(e)}),i},l=function(t,i){var r=[];return r.push(t[0]),n.each(i,function(u){var f=n.grep(t,function(n){return typeof n.Value=="undefined"?!1:u<i.length-1?n.Value>=i[u]&&n.Value<i[u+1]:n.Value>=i[u]}),e;f.length>0&&(e={Value:i[u],TooltipValue:u<i.length-1?(i[u+1]-i[u])/2+i[u]:i[u],TotalEntries:f.length,SentimentType:f[0].SentimentType},r.push(e))}),r},a=function(i){for(var e=t.ForecastData.Entries.map(function(n){return n[i.Value]}),u=n.grep(e,function(n){return n!==null}),o=t.Data.Values[0][i.Statics],s=o.PipsRange,h=Math.min.apply(Math,u),c=Math.max.apply(Math,u),f=[],r=h;r<=c;r=r+s)f.push(r);return f},v=function(t){var i=[];return n.each(t,function(t,r){var u=n.map(r,function(n,t){return t===0?n:n.TooltipValue});i.push(u)}),i};return t}}(FXStreetWidgets.$),function(){FXStreetWidgets.Widget.ForecastChart.Bias=function(){var t=FXStreetWidgets.Widget.ForecastChart.Base(),n=FXStreetWidgets.Util.extendObject(t);return t.getColumnsConfigsByPeriodType=function(n){var t={RowTitle:"PriceAverage_Row",PropertyName:"PriceAverage",ForecastType:n},i={RowTitle:"Bullish_Row",PropertyName:"BullishPercent",ForecastType:n},r={RowTitle:"Bearish_Row",PropertyName:"BearishPercent",ForecastType:n},u={RowTitle:"Sideways_Row",PropertyName:"SidewaysPercent",ForecastType:n};return[{RowTitle:"ClosePrice_Row",PropertyName:"ClosePrice"},r,u,i,t]},t.buildJson=function(t,i){var u="#fxs_"+i+"_"+n.WidgetId,r="fxs_bias_"+i,f=n.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({name:"Bullish_Row",axes:"y2",names:n.Translations.Bullish,colors:"#338473",classes:r+"_bullish",types:"area"}).addDataColumnConfig({name:"Sideways_Row",axes:"y2",names:n.Translations.Sideways,colors:"#a3a3a8",classes:r+"_sideways",types:"area"}).addDataColumnConfig({name:"Bearish_Row",axes:"y2",names:n.Translations.Bearish,colors:"#d25746",classes:r+"_bearish",types:"area"}).addDataColumnConfig({name:"ClosePrice_Row",axes:"y",names:n.Translations.ClosePrice,colors:"#1b1c23",classes:r+"_closeprice"}).addDataColumnConfig({name:"PriceAverage_Row",axes:"y",names:n.Translations.Mean,colors:"#04aab2",classes:r+"_priceAverage"}).withArea(!0).withGroup("Bullish_Row","Sideways_Row","Bearish_Row").withOrder(!1).withShowY(!0).withAxis({name:"y2",value:{show:!0,tick:{format:function(n){return n+"%"}},min:0,max:100,padding:{top:0,bottom:0}}}).withLeftPadding(0).withRightPadding(0).withTooltipValueDelegate(function(n,t,i){return i==="Bullish_Row"||i==="Sideways_Row"||i==="Bearish_Row"?n+"%":n}).build(t,u,f)},n}}(FXStreetWidgets.$),function(){FXStreetWidgets.Widget.ForecastChart.Averages=function(){var t=FXStreetWidgets.Widget.ForecastChart.Base(),n=FXStreetWidgets.Util.extendObject(t);return t.getColumnsConfigsByPeriodType=function(n){var t={RowTitle:"Mean_Row",PropertyName:"PriceAverage",ForecastType:n},i={RowTitle:"Median_Row",PropertyName:"PriceMedian",ForecastType:n},r={RowTitle:"Mode_Row",PropertyName:"PriceMode",ForecastType:n};return[{RowTitle:"ClosePrice_Row",PropertyName:"ClosePrice"},t,i,r]},t.buildJson=function(t,i){var u="#fxs_"+i+"_"+n.WidgetId,r="fxs_averages_"+i,f=n.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({name:"ClosePrice_Row",axes:"y2",names:n.Translations.ClosePrice,colors:"#1b1c23",classes:r+"_closeprice"}).addDataColumnConfig({name:"Mean_Row",axes:"y2",names:n.Translations.Mean,colors:"#04aab2",classes:r+"_mean"}).addDataColumnConfig({name:"Median_Row",axes:"y2",names:n.Translations.Median,colors:"#e4871b",classes:r+"_median"}).addDataColumnConfig({name:"Mode_Row",axes:"y2",names:n.Translations.Mode,colors:"#d1495b",classes:r+"_mode"}).build(t,u,f)},n}}(FXStreetWidgets.$),function(n){FXStreetWidgets.Widget.ForecastChart.ShiftedPrice=function(){var i=FXStreetWidgets.Widget.ForecastChart.Base(),t=FXStreetWidgets.Util.extendObject(i),r={},u;return t.init=function(n){t.setSettingsByObject(n);u();i.init(n)},u=function(){n.each(t.ForecastPeriodType,function(n,i){var u=t.getOffsetByForecastPeriodType(i.Statics),f=t.getValuesWithTimeOffset(t.Data.Values,-u,!0,t.Data.Values[t.Data.Values.length-1].Date);r[i.Statics]=f})},i.getTimeseriesConfigs=function(n){var i={AxisName:"shifted_x",Values:r[n]},u={AxisName:"x",Values:t.Data.Values};return[i,u]},i.getColumnsConfigsByPeriodType=function(n){var t={Values:r[n],RowTitle:"PreviousClose_Row",PropertyName:"ClosePrice"},i={RowTitle:"Mean_Row",PropertyName:"PriceAverage",ForecastType:n},u={RowTitle:"Median_Row",PropertyName:"PriceMedian",ForecastType:n},f={RowTitle:"Mode_Row",PropertyName:"PriceMode",ForecastType:n};return[t,i,u,f]},i.buildJson=function(n,i){var u="#fxs_"+i+"_"+t.WidgetId,r="fxs_shiftedprice_"+i,f=t.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({xs:"shifted_x",name:"PreviousClose_Row",axes:"y2",names:t.Translations.ShiftedPrice,colors:"#1b1c23",classes:r+"_previousclose"}).addDataColumnConfig({name:"Mean_Row",axes:"y2",names:t.Translations.Mean,colors:"#04aab2",classes:r+"_mean"}).addDataColumnConfig({name:"Median_Row",axes:"y2",names:t.Translations.Median,colors:"#e4871b",classes:r+"_median"}).addDataColumnConfig({name:"Mode_Row",axes:"y2",names:t.Translations.Mode,colors:"#d1495b",classes:r+"_mode"}).build(n,u,f)},t}}(FXStreetWidgets.$),function(){FXStreetWidgets.Widget.ForecastChart.PriceChange=function(){var t=FXStreetWidgets.Widget.ForecastChart.Base(),n=FXStreetWidgets.Util.extendObject(t);return t.getColumnsConfigsByPeriodType=function(n){var t={RowTitle:"Mean_Row",PropertyName:"PriceAverage",ForecastType:n},i={RowTitle:"Median_Row",PropertyName:"PriceMedian",ForecastType:n},r={RowTitle:"Mode_Row",PropertyName:"PriceMode",ForecastType:n};return[{RowTitle:"PriceChange_Row",PropertyName:"WeeklyPriceChange"},t,i,r]},t.buildJson=function(t,i){var u="#fxs_"+i+"_"+n.WidgetId,r="fxs_pricechange_"+i,f=n.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({name:"PriceChange_Row",axes:"y",names:n.Translations.PriceChange,types:"bar",colors:"#a3a3a8",classes:r+"_pricechange"}).addDataColumnConfig({name:"Mean_Row",axes:"y2",names:n.Translations.Mean,colors:"#04aab2",classes:r+"_mean"}).addDataColumnConfig({name:"Median_Row",axes:"y2",names:n.Translations.Median,colors:"#e4871b",classes:r+"_median"}).addDataColumnConfig({name:"Mode_Row",axes:"y2",names:n.Translations.Mode,colors:"#d1495b",classes:r+"_mode"}).withAxis({name:"y",value:{show:!0,tick:{format:function(n){return n.toFixed(2)+"%"},count:5}}}).withBar(.5).build(t,u,f)},n}}(FXStreetWidgets.$),function(){FXStreetWidgets.Widget.ForecastChart.SmoothAverage=function(){var t=FXStreetWidgets.Widget.ForecastChart.Base(),n=FXStreetWidgets.Util.extendObject(t);return t.getColumnsConfigsByPeriodType=function(n){var t={RowTitle:"Average_Row",PropertyName:"Average",ForecastType:n};return[{RowTitle:"ClosePrice_Row",PropertyName:"ClosePrice"},t]},t.buildJson=function(t,i){var u="#fxs_"+i+"_"+n.WidgetId,r="fxs_smoothaverage_"+i,f=n.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({name:"Average_Row",axes:"y2",names:n.Translations.SmoothAverage,colors:"#8C2BD8",classes:r+"_average"}).addDataColumnConfig({name:"ClosePrice_Row",axes:"y2",names:n.Translations.ClosePrice,colors:"#1b1c23",classes:r+"_closeprice"}).build(t,u,f)},n}}(FXStreetWidgets.$),function(){FXStreetWidgets.Widget.ForecastChart.MinMax=function(){var t=FXStreetWidgets.Widget.ForecastChart.Base(),n=FXStreetWidgets.Util.extendObject(t);return t.getColumnsConfigsByPeriodType=function(n){var t={RowTitle:"HighPrice_Row",PropertyName:"HighPrice",ForecastType:n},i={RowTitle:"LowPrice_Row",PropertyName:"LowPrice",ForecastType:n};return[{RowTitle:"ClosePrice_Row",PropertyName:"ClosePrice"},t,i]},t.buildJson=function(t,i){var u="#fxs_"+i+"_"+n.WidgetId,r="fxs_minmax_"+i,f=n.getAssetDecimalPlaces();return(new FXStreetWidgets.ForecastChartC3JsonBuilder).addDataColumnConfig({name:"HighPrice_Row",axes:"y2",names:n.Translations.Max,colors:"#338473",classes:r+"_max"}).addDataColumnConfig({name:"LowPrice_Row",axes:"y2",names:n.Translations.Minim,colors:"#D25746",classes:r+"_min"}).addDataColumnConfig({name:"ClosePrice_Row",axes:"y2",names:n.Translations.ClosePrice,colors:"#1b1c23",classes:r+"_closeprice"}).build(t,u,f)},n}}(FXStreetWidgets.$),function(n){FXStreetWidgets.Widget.ForecastChartsManager=function(t){var o=FXStreetWidgets.Widget.Base(t),i=FXStreetWidgets.Util.extendObject(o);i.Asset=null;i.ClassSize=null;i.WidgetId="";i.Seo=!1;i.ForecastData=null;i.TooltipMustacheName="";i.jsonData={};var r={},u={},f="",e={};i.init=function(n){i.setSettingsByObject(n);i.setVars()};i.setVars=function(){var n=s();i.loadDataFromUrl(n)};i.renderHtml=function(){h();var n=i.loaderBase.config.Mustaches[i.loaderBase.config.WidgetName],t=FXStreetWidgets.Util.renderByHtmlTemplate(n,i.jsonData);i.Container.html(t);c();a();e.Overview.render()};var s=function(){var n=new Date,u=n.toISOString(),t,r;return n.setMonth(n.getMonth()-12),t=n.toISOString(),r=i.loaderBase.config.EndPoint+"?assetIds="+i.Asset+"&dateFrom="+t+"&dateTo="+u,r},h=function(){r=i.loaderBase.config.Translations;i.jsonData={Values:{},Filters:{},Translations:r,WidgetId:i.WidgetId};l()},c=function(){var t={Data:i.data,WidgetId:i.WidgetId,ForecastData:i.ForecastData,TooltipTemplate:i.loaderBase.config.Mustaches[i.TooltipMustacheName],Translations:r};n.each(i.jsonData.Filters,function(n,i){var r=new FXStreetWidgets.Widget.ForecastChart[i.Selector];r.init(t);e[i.Selector]=r})},l=function(){i.jsonData.Filters=[{Title:r.Overview,Selector:"Overview"},{Title:r.Bias,Selector:"Bias"},{Title:r.Averages,Selector:"Averages"},{Title:r.ShiftedPrice,Selector:"ShiftedPrice"},{Title:r.PriceChange,Selector:"PriceChange"},{Title:r.SmoothAverage,Selector:"SmoothAverage"},{Title:r.MinimMax,Selector:"MinMax"}]},a=function(){n.each(i.jsonData.Filters,function(n,t){var o="#forecast_charts_filter_{0}_{1}".replace("{0}",t.Selector).replace("{1}",i.WidgetId),r=i.Container.find(o),e;r.click(function(){v(t)});t.Selector==="Overview"&&(r.addClass("active"),e="fxs_forecast_charts_container_"+t.Selector,i.Container.addClass(e),f=e);u[t.Selector]=r})},v=function(n){var t,r;for(t in u)u.hasOwnProperty(t)&&u[t].removeClass("active");u[n.Selector].addClass("active");r="fxs_forecast_charts_container_"+n.Selector;i.Container.removeClass(f);i.Container.addClass(r);f=r;e[n.Selector].render()};return i}}(FXStreetWidgets.$),function(n){FXStreetWidgets.Widget.LoaderForecastCharts=function(){var i=new FXStreetWidgets.Widget.LoaderBase({WidgetType:"MarketTools",WidgetName:"forecastcharts",EndPointV2:"api/v2/forecast/historic",EndPointTranslationV2:"api/v2/cultures/{culture}/forecast/",DefaultHost:"https://markettools.fxstreet.com/",DefaultVersion:"v2",Mustaches:{forecastcharts:"",forecastcharts_tooltip:""},CustomJs:["c3.min.js","d3.min.js"]}),t=FXStreetWidgets.Util.extendObject(i),r;return i.initWidgets=function(i){n.each(i,function(i,u){var f=n(u),e=f.attr("fxs_asset"),o=t.getHost()+"api/"+t.getVersion()+"/forecast/"+FXStreetWidgets.Configuration.getCulture()+"/study/";r(e)&&(o+="?assetIds="+e);FXStreetWidgets.Util.ajaxJsonGetter(o).done(function(n){var i={Container:f,Asset:e,ClassSize:f.attr("fxs_class_size"),WidgetId:FXStreetWidgets.Util.guid(),Seo:FXStreetWidgets.Util.isUndefined(f.attr("fxs_seo"))?!1:!0,ForecastData:n.Values.length>0?n.Values[0]:null,TooltipMustacheName:"forecastcharts_tooltip"},r=new FXStreetWidgets.Widget.ForecastChartsManager(t);r.init(i)}).fail(function(){console.error("fxserror: Couldn't get forecast data")})})},r=function(n){if(!n)return!1;try{if(FXStreetWidgets.Util.isUndefined(n)||!n.startsWith("fxs-"))throw n;return!0}catch(i){return console.log("fxserror unable to create "+t.config.WidgetName+", asset not valid: "+i.message),!1}},t},function(){var n=FXStreetWidgets.Widget.LoaderForecastCharts();n.init()}()}(FXStreetWidgets.$);
//# sourceMappingURL=forecastcharts.min.js.map